{% from '_macros.html' import txt, txt_threads, txt_posts, ago with context -%}
<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>RHforum » {% block title %}{% endblock %}</title>
    <link href='http://fonts.googleapis.com/css?family=Ubuntu&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>

* {box-sizing: border-box;}

body {width: 75%; margin: auto; font-family: 'Ubuntu', sans-serif; padding-bottom: 64px;
    margin-top: 8px;}

a {color: #006;}
a:hover {color: #339;}

.topbar {text-align: right;}

.flash {border: 1px solid rgb(197, 188, 16); background: rgb(248, 241, 190);
    border-radius:8px; padding: 8px; margin: 6px 12px 0px 12px;}

.category-name {font-size: 26px; margin-bottom: 2px; border-bottom: 1px solid #999; border-left: 1px solid #999; border-radius: 8px; padding-left: 4px;
    background: linear-gradient(to bottom, rgba(255, 255, 255, 0) 0%, #eee 100%);}

.row {border-bottom: 1px solid #ddd; display: block; clear: both; padding: 3px;
    transition: background-color 0.15s ease;}
.row:hover {background: rgba(186, 186, 255, 0.5); transition-delay: 0.1s;}
.row-name {font-size: 24px;}
.row-data {float: right; text-align: right; }
a.row-text {display: block; text-decoration: none; color: black;}
a.row-text:hover {color: #004 !important;}

.row-name .author {font-size: 16px; margin-left: 12px; font-style:italic;}
.row-name .author::before {content: '—';}

.index-admin {text-align: right;}
.forum-admin    {text-align: right; float: right; margin-top: 42px;}
/*.category-admin {text-align: right; float: right; margin-top: 4px;}*/
.edit-category-link {float: right; font-size: 14px; font-weight: normal;}


/*.post:before { content: ''; display: block; position: relative; width: 0; height: 5em; margin-top: -5em; background: none !important; }*/ /* For anchor */ 
.post {min-height: 100px; border-bottom: 1px solid #ddd; margin-bottom: 14px; position: relative;
    background: none; padding: 4px;}
.post-sidebar {height: 100%; min-height: 100px; display:inline-block; width: 150px; border-right: 1px solid #ddd;
    float: left; background: none; text-align: center; position: absolute;}
.post-contents {margin-left: 150px; padding-left: 8px; height: 100%; min-height: 100px;  }
.post-data {border-bottom: 1px solid #ddd; width: 100%; text-align: right; font-size: smaller;}
.post-text {padding: 4px;}
.post-text p {text-indent: 4%;}
.post-text textarea {width: 95%; min-height: 100px; border: none; font-family: 'Ubuntu', sans-serif; background: white; color: #111; box-shadow: inset 0 0 1em #bbb; border-radius: 1em; padding:0.5em;}
.post-text textarea:focus {box-shadow: inset 0 0 1em #cca;}
.post-edited {font-size: smaller; text-align: right; font-style: italic;}

.post:target, .post:target .post-sidebar {background-color: #ffffe4;
    background: linear-gradient(to bottom, #ffffff 0%, rgba(255, 255, 255, 0) 50%);}

.new-thread #name, .post-contents #name, .category-name #name {width: 100%; margin-bottom:6px; font-size: 24px;}
.category-name #name {font-weight: bold; width: 50%;}

.delete-button {color: #b00;}

.fail {color: #800;}

@media (max-width: 800px) {
    body {width: 90%;}
    .row {position: relative;}
    .row a.row-text {min-height: 62px;}
    .latest-posts .row a.row-text {min-height: 32px;}
    .row-data {font-size: 12px; position: absolute; bottom: 0; right: 0; margin-top: 64px;}
    
    .post-contents {margin-left: 0;}
    .post-sidebar {float: left; position: inherit; height: auto; border-bottom: 1px solid #ddd; margin-right: 4px;
        width: 150px; background: white;}
}
@media (max-width: 600px) {
    .post-sidebar {width: 125px;}
    }

    </style>
    <script>
        window.onload = function(){
            Array.prototype.forEach.call(document.getElementsByClassName('delete-button'), function(el) {
                el.addEventListener('click', function(event) {
                    console.log('click');
                    if (!this.confirmed) {
                        this.confirmed = true;
                        this.value = "Opravdu?";
                        event.preventDefault()
                    }
                });
            });
        };
    </script>
</head>
<body>
    <div class="topbar">
        {% if g.user %}
            Přihlášen/a za <a href="{{g.user.url}}">{{g.user.name}}</a> &bull;
            <a href="{{url_for('logout')}}">Odhlásit se</a>
        {% else %}
            <a href="{{url_for('login')}}">Přihlásit se</a> &bull;
            <a href="{{url_for('register')}}">Registrovat</a>
        {% endif %}
    </div>
    {% with messages = get_flashed_messages() %}
        {% for message in messages %}
            <div class="flash">{{ message }}</div>
        {% endfor %}
    {% endwith %}
    
    {% block content %}
    {% endblock %}
</body>
</html>
